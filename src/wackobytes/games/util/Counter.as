package com.kpm.util{	import com.kpm.kpm.BubbleId;	import com.kpm.kpm.EBStd;		import flash.display.DisplayObject;	import flash.events.Event;			public class Counter extends GameComponent	{		public var form 	: ENumberForm;		public function Counter(pForm : ENumberForm, pNumber : uint, pStage : DisplayObject = null)		{						form = pForm;			numeral = pNumber;			if(pStage) 	pStage.addEventListener(Event.ADDED, initMovie, false, 0 , true);					}				public static function getNumberForm (pBubbleId : BubbleId)		{			var numForm : ENumberForm;									if(pBubbleId.Name.Text.indexOf("Numeral") != -1)				numForm = ENumberForm.Numeral;							if(pBubbleId.Name.Text.indexOf("ChangePlus") != -1)				numForm = ENumberForm.Numeral;						else if(pBubbleId.Name.Text.indexOf("Finger") != -1)				numForm = ENumberForm.Finger;						else if(pBubbleId.Name.Text.indexOf("Frame") != -1)				numForm = ENumberForm.FiveFrame;						else if(pBubbleId.Name.Text.indexOf("DiceDots") != -1)				numForm = ENumberForm.DiceDots;							else if(pBubbleId.Name.Text.indexOf("Mixed") != -1)				numForm = Util.getRandomFrom(GameLib.numberForms_All) as ENumberForm;						else if(pBubbleId.Name.Standard == EBStd.Comparison)				numForm = ENumberForm.Numeral;						if(numForm == null)				throw new Error("Counter.getNumberForm bubble Id not recognized " + pBubbleId);			return numForm;		}				public function initMovie(e:Event)		{			if(!Movie)			{				if(numeral > 10)				{					if(form == ENumberForm.Numeral)					{						MovieName = form.Text + int(numeral/10);																		if(numeral >= 20)						{							addMovie(String(form.Text + numeral%10), true, 0);							Movie.x -= Movie.width/4;						}						else							{							addMovie(String(form.Text + numeral%10), true, 10);							Movie.x -= Movie.width/3;						}																	}												else if(form == ENumberForm.FiveFrame)					{                        MovieName = form.Text + "10";												if(numeral >= 20)							addMovie(form.Text + "10", false, Movie.height/6);													if(numeral%10 > 0)						{							if(numeral%10 <= 5)								addMovie(String("tenframe" + form.Text + numeral%10), false), Movie.height/6;							if(numeral%10 > 5)								addMovie(String(form.Text + numeral%10), false), Movie.height/6;						}					}													}								else				{					Util.debug(MovieName + " " + form + " " + numeral);					Util.debug(form.Text);					MovieName = form.Text + numeral;				}                if(form == ENumberForm.FiveFrame)                {                    if(numeral <= 5)                        Movie.y += Movie.height/2;                }////				var emptyBox : EmptyBox = new EmptyBox();//				emptyBox.height = height;//				emptyBox.width = width;//				emptyBox.x = 0;//				emptyBox.y = 0;////				if(number > 10)//					emptyBox.y += height/3;////				addChild(emptyBox);			}		}				public function get Text() : String		{			return (form.Text + numeral);		}	}}